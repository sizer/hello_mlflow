services:
  dev:
    build:
      context: .
      dockerfile: .devcontainer/Dockerfile
    volumes:
      - ./:/src/
    tty: true
    networks:
      default:
  mlflow:
    image: ghcr.io/mlflow/mlflow:v3.6.0
    ports:
      - "5000:5000"
    environment:
      - MLFLOW_HOST=0.0.0.0
      - MLFLOW_BACKEND_STORE_URI=sqlite:////mlflow/mlflow.db
      - MLFLOW_ARTIFACT_ROOT=/mlflow/artifacts
      - MLFLOW_SERVER_ALLOWED_HOSTS=mlflow:5000,localhost:5000,127.0.0.1:*,0.0.0.0:*
    volumes:
      - mlflow_data:/mlflow
    entrypoint: mlflow server
    tty: true
    networks:
      default:
volumes:
  mlflow_data:
networks:
  default:
